cmake_minimum_required(VERSION 3.10)
project(ajcampus C)

# ğŸ“¦ Output binary path
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)

# ğŸ§  C standard
set(CMAKE_C_STANDARD 11)
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_C_EXTENSIONS OFF)

# âš ï¸ Compiler warnings
if (CMAKE_C_COMPILER_ID MATCHES "GNU|Clang")
    add_compile_options(-Wall -Wextra)
elseif (CMAKE_C_COMPILER_ID STREQUAL "MSVC")
    add_compile_options(/W4)
endif()

# ğŸ“¥ Manual Libharu setup (no pkg-config)
include_directories(${PROJECT_SOURCE_DIR}/include)
link_directories(${PROJECT_SOURCE_DIR}/lib)

# ğŸ“ Source files
file(GLOB MAIN_SOURCES "src/main/*.c")
set(MAIN_SOURCES
    src/main/main.c
    src/main/auth.c
    src/main/signin.c
    src/main/signup.c
    src/main/ui.c
    src/main/fileio.c
    src/main/student.c
    src/main/utils.c
)

# ğŸ§ª Test subdirectory
#add_subdirectory(src/tests)

# ğŸ¯ Main executable
add_executable(${PROJECT_NAME} ${MAIN_SOURCES})
target_compile_definitions(${PROJECT_NAME} PRIVATE _CRT_SECURE_NO_WARNINGS)

# ğŸ”— Link PDF library
target_link_libraries(${PROJECT_NAME} hpdf)
